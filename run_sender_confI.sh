#!/bin/bash# Configuration I: BW=120Mbps, RTT=10ms, MTU=1500BINTERFACE=enp2s0DST_IP=192.168.6.2# 1. Set MTUecho 'Setting MTU to 1500 on $INTERFACE...'sudo ifconfig $INTERFACE mtu 1500# 2. Start Traffic Phasesecho 'Starting traffic generation...'# Global flow ID countersCUBIC_FLOW_ID=0PRAGUE_FLOW_ID=0echo 'Phase 1: Starting 1 new Cubic flows and 1 new Prague flows...'# Add 1 Cubic flows for 480sfor j in $(seq 1 1); do  CUBIC_FLOW_ID=$((CUBIC_FLOW_ID + 1))  PORT=$((5201 + $CUBIC_FLOW_ID - 1))  iperf3 -c $DST_IP -p $PORT -t 480 -i 0.1 -C cubic --logfile /dev/null &  echo "  Started Cubic flow $CUBIC_FLOW_ID on port $PORT"done# Add 1 Prague flows for 480sfor j in $(seq 1 1); do  PRAGUE_FLOW_ID=$((PRAGUE_FLOW_ID + 1))  PORT=$((5201 + 25 + $PRAGUE_FLOW_ID - 1))  iperf3 -c $DST_IP -p $PORT -t 480 -i 0.1 -C prague --logfile /dev/null &  echo "  Started Prague flow $PRAGUE_FLOW_ID on port $PORT"doneecho 'Sleeping 120s before Phase 2...'sleep 120echo 'Phase 2: Starting 1 new Cubic flows and 1 new Prague flows...'# Add 1 Cubic flows for 360sfor j in $(seq 1 1); do  CUBIC_FLOW_ID=$((CUBIC_FLOW_ID + 1))  PORT=$((5201 + $CUBIC_FLOW_ID - 1))  iperf3 -c $DST_IP -p $PORT -t 360 -i 0.1 -C cubic --logfile /dev/null &  echo "  Started Cubic flow $CUBIC_FLOW_ID on port $PORT"done# Add 1 Prague flows for 360sfor j in $(seq 1 1); do  PRAGUE_FLOW_ID=$((PRAGUE_FLOW_ID + 1))  PORT=$((5201 + 25 + $PRAGUE_FLOW_ID - 1))  iperf3 -c $DST_IP -p $PORT -t 360 -i 0.1 -C prague --logfile /dev/null &  echo "  Started Prague flow $PRAGUE_FLOW_ID on port $PORT"doneecho 'Sleeping 120s before Phase 3...'sleep 120echo 'Phase 3: Starting 8 new Cubic flows and 8 new Prague flows...'# Add 8 Cubic flows for 240sfor j in $(seq 1 8); do  CUBIC_FLOW_ID=$((CUBIC_FLOW_ID + 1))  PORT=$((5201 + $CUBIC_FLOW_ID - 1))  iperf3 -c $DST_IP -p $PORT -t 240 -i 0.1 -C cubic --logfile /dev/null &  echo "  Started Cubic flow $CUBIC_FLOW_ID on port $PORT"done# Add 8 Prague flows for 240sfor j in $(seq 1 8); do  PRAGUE_FLOW_ID=$((PRAGUE_FLOW_ID + 1))  PORT=$((5201 + 25 + $PRAGUE_FLOW_ID - 1))  iperf3 -c $DST_IP -p $PORT -t 240 -i 0.1 -C prague --logfile /dev/null &  echo "  Started Prague flow $PRAGUE_FLOW_ID on port $PORT"doneecho 'Sleeping 120s before Phase 4...'sleep 120echo 'Phase 4: Starting 15 new Cubic flows and 15 new Prague flows...'# Add 15 Cubic flows for 120sfor j in $(seq 1 15); do  CUBIC_FLOW_ID=$((CUBIC_FLOW_ID + 1))  PORT=$((5201 + $CUBIC_FLOW_ID - 1))  iperf3 -c $DST_IP -p $PORT -t 120 -i 0.1 -C cubic --logfile /dev/null &  echo "  Started Cubic flow $CUBIC_FLOW_ID on port $PORT"done# Add 15 Prague flows for 120sfor j in $(seq 1 15); do  PRAGUE_FLOW_ID=$((PRAGUE_FLOW_ID + 1))  PORT=$((5201 + 25 + $PRAGUE_FLOW_ID - 1))  iperf3 -c $DST_IP -p $PORT -t 120 -i 0.1 -C prague --logfile /dev/null &  echo "  Started Prague flow $PRAGUE_FLOW_ID on port $PORT"doneecho 'All flows started. Waiting for experiment to finish...'waitecho 'Experiment Done.'